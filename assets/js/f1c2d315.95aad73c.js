"use strict";(self.webpackChunkkmm_icerock_dev=self.webpackChunkkmm_icerock_dev||[]).push([[7646],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return d}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),s=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=s(n),d=a,h=m["".concat(c,".").concat(d)]||m[d]||u[d]||o;return n?r.createElement(h,i(i({ref:t},p),{},{components:n})):r.createElement(h,i({ref:t},p))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},72565:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return s},default:function(){return u}});var r=n(87462),a=n(63366),o=(n(67294),n(3905)),i={},l="\u0412\u0435\u0441 \u0431\u0438\u043d\u0430\u0440\u043d\u0438\u043a\u0430 \u0441 Kotlin/Native",c={unversionedId:"kotlin-native/size_impact",id:"kotlin-native/size_impact",isDocsHomePage:!1,title:"\u0412\u0435\u0441 \u0431\u0438\u043d\u0430\u0440\u043d\u0438\u043a\u0430 \u0441 Kotlin/Native",description:"- \u0420\u0430\u0441\u0441\u043a\u0430\u0437 \u0432 \u0432\u0438\u0434\u0435\u043e \u043e \u0440\u0430\u0437\u043c\u0435\u0440\u0435 \u0444\u0440\u0435\u0439\u043c\u0432\u043e\u0440\u043a\u0430 \u0441",source:"@site/learning/kotlin-native/size_impact.md",sourceDirName:"kotlin-native",slug:"/kotlin-native/size_impact",permalink:"/learning/kotlin-native/size_impact",editUrl:"https://github.com/icerockdev/kmm.icerock.dev/tree/docusaurus/learning/kotlin-native/size_impact.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u0418\u043c\u043f\u043b\u0435\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f ObjC \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0430 \u0432 Kotlin",permalink:"/learning/kotlin-native/objc_protocol"},next:{title:"\u041f\u043b\u0430\u0433\u0438\u043d\u044b \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440\u0430",permalink:"/learning/kotlin/compiler-plugins"}},s=[],p={toc:s};function u(e){var t=e.components,n=(0,a.Z)(e,["components"]);return(0,o.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"\u0432\u0435\u0441-\u0431\u0438\u043d\u0430\u0440\u043d\u0438\u043a\u0430-\u0441-kotlinnative"},"\u0412\u0435\u0441 \u0431\u0438\u043d\u0430\u0440\u043d\u0438\u043a\u0430 \u0441 Kotlin/Native"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u0420\u0430\u0441\u0441\u043a\u0430\u0437 \u0432 ",(0,o.kt)("a",{parentName:"li",href:"https://www.youtube.com/watch?v=hrRqX7NYg3Q&t=1892s"},"\u0432\u0438\u0434\u0435\u043e")," \u043e \u0440\u0430\u0437\u043c\u0435\u0440\u0435 \u0444\u0440\u0435\u0439\u043c\u0432\u043e\u0440\u043a\u0430 \u0441\nKotlin/Native")),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://kotlinlang.slack.com/archives/C3PQML5NU/p1633027278225200"},"\u041e\u0431\u0449\u0435\u043d\u0438\u0435 \u0438\u0437 kotlinlang"),":"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Anton Afanasev",(0,o.kt)("br",{parentName:"p"}),"\n","My .framework is around ~15 mb. For a pretty small sdk with a couple of standard dependencies like ktor.",(0,o.kt)("br",{parentName:"p"}),"\n","I am fine with that, but you know...customers complains. So I must check if there are anything to do with binary sizes.",(0,o.kt)("br",{parentName:"p"}),"\n",'I tried "internalizing" all I could. And there were a pretty nice effect. I actually saw a reduction of ~500 kb after doing that on a bunch of data classes. Wonder if there are anything else that can help to downsize.',(0,o.kt)("br",{parentName:"p"}),"\n","@kpgalligan I remember you were talking about KMM team working on K\\N - Swift interoperability which should reduce the size. Wondering if there are any progress on that. I read somewhere that this work was frozen."),(0,o.kt)("p",{parentName:"blockquote"},"Kevin Galligan",(0,o.kt)("br",{parentName:"p"}),"\n","Well, again, to measure the actual size, you need to either push it to the app store and let apples servers crunch numbers, or run local size estimates with Xcode. The size on your dev disk is not wha the actual app size will be. I don't remember how I presented it in that talk (and I have a talk today that I'm really not prepared for, so I don't have a lot of time to reply here...), but raw numbers on disk don't really tell the story. For KaMP Kit, which has ktor, sqldelight, and a few others, our sizes were ~1.5m as a final size increase on real devices. I assume local disk size was much larger, but it's been a while.",(0,o.kt)("br",{parentName:"p"}),"\n","I would try this, if not uploading: ",(0,o.kt)("a",{parentName:"p",href:"https://developer.apple.com/documentation/xcode/reducing-your-app-s-size#Create-the-App-Size-Report"},"https://developer.apple.com/documentation/xcode/reducing-your-app-s-size#Create-the-App-Size-Report"),(0,o.kt)("br",{parentName:"p"}),"\n","They're not 100% the same as uploaded, but very close."),(0,o.kt)("p",{parentName:"blockquote"},"Anton Afanasev",(0,o.kt)("br",{parentName:"p"}),"\n","Thank you @kpgalligan for great advise. With the help of our iOS team I was able to run the size report and results were pretty good looking. Original ~26mb .framework file was reduced to ~6mb . I believe it should calm down our client. However, for educational purpose I am wondering if anybody have any understanding about processes that makes this downsize actually happen. Why initial .framework is so big and how it is downsized..."),(0,o.kt)("p",{parentName:"blockquote"},"Kevin Galligan",(0,o.kt)("br",{parentName:"p"}),"\n","I don't have a ton of detail, but there are a number of things. Debugging info, possibly multiple architectures (actual device only needs one). Probably a bunch of other stuff. It's not unique to kotlin. Ios size estimation can be complicated")))}u.isMDXComponent=!0}}]);