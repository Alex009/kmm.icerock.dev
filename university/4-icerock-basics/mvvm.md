---
sidebar_position: 4
---

# Архитектура MVVM

- обозначить проблему: мол огромный проект, если в классе лежит и логика, и UI, и подтягивание данных то хрен разберешься со временем и фиксы багов начнутся с долгого поиска гдеж эта штука меняется
- Что такое MVVM, как решает проблему (каждый компонент решает свою конекретную задачку)
- накидать про паттерн MVVM (мб схему или график)
- паттерн Observer разобрать 
- ???(в конце) шаблон на видос, добавить всяких приколов, придумать сценарий для разбора экрана и как он сделан
- moko-mvvm - шо це, как пользоваться, 2 видео
- тестик по кускам кода

В этом блоке мы разберем архитектурный подход MVVM, паттерн Observer и moko-mvvm

В каждом проекте, почти каждая фича (экран приложения) содержит общие куски:
- UI - user interface, то как пользователь будет видеть наше приложение
- Работа с данными - получение приложением каких-либо данных для своей работы, например запросы на сервер или обращение к БД
- Логика работы самого приложения - например, что должно произойти, если юзер нажмет на кнопку "Зарегистрироваться"

В принципе, ничего не мешает реализовать все эти блоки внутри, например, одного класса фрагмента
Однако, такой проект скоро станет очень тяжело поддерживать, ведь все будет лежать вперемешку  ДОПИСАТЬ

***Что предлагает нам MVVM?***
- принцип следующий: разделить задачу на три компонента Model, View, ViewModel
    - Model - модель данных, отвечает за работу с данными (обращение к БД, серверу). Она умеет только работать с данными, получать и сохранять при необходимости
    - View - отвечает только за UI. Не содержит в себе никакой бизнес-логики, думать вообще не умеет 
    - ViewModel - содержит в себе только бизнес-логику приложения, работает с Model и View, разберем на примере:
        - Юзер ввел номер телефона в поле ввода,
        - Нажал кнопку "Отправить код подтверждения"
        - ViewModel получила уведомление о том, кака кнопка нажата, 
        - проверила что в поле введен валидный номер телефона
        - вызвала метод у модели, модель там кинула запрос на сервер, сервер сам все дальше подумал и прислал нам код подтверждения, который мы
        - ViewModel сказала View, чтобы та скрыла поле с номером телефона и показала поле в которое можно будет ввести код подтверждени и кнопку "Отправить повторно"
- Бонусы на андроиде
    - так как вьюмодель с гугловых компонентов, онп не пересоздается, когда пересоздается Activity или Fragment  
    
***Что нам это дало?***
- теперь у нас есть четкая структура, и наши компоненты независимы друг от друга:
    - вью хочет только экземпляр вьюмодели
    - вьюмодель при создании хочет только кого-нибудь, кто реализует необходимые ей методы
    - Модель (репозиторий) просто реализует методы разных вьюмоделей, она вообще ничего не знает о вьюхах 
- легкость в исправлении ошибок - теперь для исправления UI, бизнес-логики или логики работы с данными мы сразу знаем в каком месте требуются изменения. 

читнуть про [VM](https://developer.android.com/topic/libraries/architecture/viewmodel)


## Observer
прочитать про [паттерн](https://blog.mestwin.net/observer-pattern-in-kotlin-design-patterns/)
В Андроиде есть лайвдаты, мы, используя moko-mvvm перетащили их в общий код

Нарисовать схему со связями кто про кого знает  

MVVM - это шаблон проектирования представляющий собой ...
Зачем нужен? - обозначить проблему (пересоздание экранов на Android, каша в классах если пер)
Написать про пользу в использовании с мультиплатформой (удобно писать и использовать общий код)

Про Observer написать 

Можно записать видео-разбор какого-нибудь экрана какого-нибудь приложения. Показать вьюмодель, показать два экрана - iOS и Android, показать что оба дергают вьюмодель, оба получают данные от вьюмодели, которые вьюмодель берет из репозитория. Что при желании легко и просто поменять логику во вьюмодели, можно поменять iOS и Android UI, что платформа не думает и тд

После этого отправить сделать практику по шагам, или показать moko-mvvm и потом к практике отправлять

## Библиотека moko-mvvm

- [GitHub](https://github.com/icerockdev/moko-mvvm) библиотеки

- Посмотреть и повторить самостоятельно проект из видео [moko-mvvm #1](https://youtu.be/qe8FcIQEmyA)

Добавить тест в конце в гуглформе про Observer
