---
sidebar_position: 2
---

# moko-fields

## moko-fields

В контексте форм нам нужна вся библиотека - она предназначена для упрощения кода форм и дает готовые стандартные решения

### FormField

### Validation

Для использования `FormField` в общем коде мы реализовали библиотеку [moko-fields](https://github.com/icerockdev/moko-fields).

Для знакомства с библиотекой посмотрите материалы на странице в базе знаний - [moko-fields](/learning/libraries/moko/moko-fields).

Потребность в этой библиотеке возникла из-за того, что для создания логики формы ввода в общем коде необходимы следующие элементы:
- `LiveData(String)` - текст поля
- `LiveData(Bool)` - валидно/невалидно поле (??? можно же привязываться к тексту ошибки, что он isEmpty)
- `LiveData(String)` - текст ошибки валидации

А представьте, что у вас 7 или 8 таких полей, получится много однотипного кода, в котором легко будет запутаться и допустить ошибку.  

Библиотека позволяет использовать специальный класс `FormField` для форм ввода, который включает в себя все эти три лайвдаты.

Для создания `FormField` необходимо только установить тип и задать валидацию для этого значения. Тип поля не обязательно должен быть `String`, подойдет любой, который можно как-то установить: `int`, `bitmap`, `data` и тд.

[Usage](https://github.com/icerockdev/moko-fields#usage)

## Валидация
Разберем, как добавлять валидацию в `FormField`:
- можно использовать [встроенные валидаторы](https://github.com/icerockdev/moko-fields/tree/c9c09069da717d4995ee6c96f8ec6ef7446af503/fields/src/commonMain/kotlin/dev/icerock/moko/validations)
- можно создать полностью свою валидацию

Как можно настроить валидацию:
- валидацию можно вызвать в любой момент. Зачем это? 
  - при первом вводе юзера - валидация не должна проверяться, пока он не закончит ввод до конца, и не нажмет кнопку, к которой бдет привязана валидация, чтобы, пока он еще не ввел все, что задумал, у него не светились ошибки.
- поля можно объединить в список и валидировать их одновременно
- валидация полей может быть завязана на других полях (пароль + повторите пароль)
- у FormField есть поле `isValid` и `validationError`


## Практическое задание 

Создайте экран - Вход в приложение по email/password


- добавьте `emailField` и `passwordField` в общий код приложения, созданного про [шаблону](https://kotlinlang.org/docs/multiplatform-mobile-create-first-app.html)
- правила валидации поля email: 
  - регексп на валидный email (найти подходящую регулярку)
  - регексп на уже использованный email (тот, который прошел - сохраняем зарегистрированные для текущей сессии)
  - только латиница
- правила валидация пароля:
    - количество символов > 8
    - есть цифры, большие и маленькие буквы 
    - только латиница
    - не содержит небуквенных символов
- для Android и iOS UI используйте [Material Text Fields](https://material.io/components/text-fields)
  - добавьте extension метод, для связи филда на UI и лайвдаты (там в материале есть поле валидации, нужно связать его с лайвдатой ошибки, но чтобы все поля привязывались в одном экстеншене)
  