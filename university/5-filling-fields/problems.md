---
sidebar_position: 1
---

# Что следует знать про формы ввода:

## Что следует знать про формы ввода:
- Данные, введенные пользователем, должны валидироваться
  - Поле не должно валидироваться, пока юзер не закончил его ввод, чтобы не пугать преждевременными ошибками
  - Если поле одно - первая валидация должна произойти после ввода данных в поле и нажатия кнопки-триггера, после этого валидация происходит в момент заоплнения поля
  - Если полей несколько - валидация происходит при переходе с одного поля на другое (когда невалидное поле осталось одно - в момент его заполнения наверное?)
- В клавиатуре должны быть настроены вспомогательные клавиши - переход фокуса на следующее поле, отправка данных на последнем поле (вызов дейтсвия по триггер-кнопке) 
- Должны быть правильно настроены клавиатуры и подсказки (предложение автозаполнения типа? пароль/email/телефон) для разных типов вводимых данных
  - email - текст(латиница), цифры, символы - клава только с латиницей, без других языков
  - текст - просто обычная клава
  - номер телефона: цифирная клава без символов
- Обратный отсчет на форме - для таймера нужно сравнивать время начала отсчета и текущее время, чтобы правильно отсчитать
  - На iOS приложение полностью ставится на паузу при сворвачивании, если бы были на delay - то он бы не работал
  - Использовать `delay` нельзя, потому что он будет работать не ровно через секунду, а через чуть большее время, т.к. мобилки - это не системы реального времени, поэтому рано или поздно накопится ошибка, из-за чего какая-то секунда проскочет (отображалось 11 сек, а потом сразу 9 сек)
  - надо брать текущее время, и сравнивать его миллисекундами с временем запуска таймера - тогда не поломается 
- Если на форме есть связанные поля - например пароль и подтверждение пароля, то надо чтобы их валидация зависела друг от друга и чтобы она срабатывала при изменении любого из полей.
  - Пример: ввели пароль, потом ввели повторение пароля - видим, что пароли не совпадают. Поняли, что первый раз забыли одну букву - вернулись и добавили пропущенную букву. После этого валидация должна пройти успешно
- Если сервер сообщает об ошибке в данных, полученных из поля ввода - нужно выводить эту ошибку у этого поля. Локальная проверка полей ввода также должна отображать ошибки валидации у конкретного поля
  - Примеры ошибок валилидации, о которых может сообщить сервер:
    - email уже исользуется
    - email не найден  
    - Время недоступно ***Про что это?***
    - никнейм занят
    - новый пароль совпадает со старым
- Если ожидается работа с сетью или какая-то другая работа программы с введенными данными - формы ввода и триггер-кнопка должны становиться неактивными
- Если на форме есть поля, которые должны заполнять друг друга (конвертер валют) - важно сделать это аккуратно и не создать рекурсию изменений. Логика должна быть полностью в общем коде :)
- Если триггер-кнопка активируется только при валидных данных - нужно быть аккуратным - если пользователю не будет указано что не так с тем, что он ввел, он может не догадаться почему кнопка не активна и посчитает приложение сломанным
- Если форма длинная, мы все заполнили и проскроллили вниз до триггер-кнопки, нажали кнопку и нам вернулась ошибка в поле, которое не видно - надо скроллить к первому полю с ошибкой
- Должна быть корректно проставлена информация о контенте поля для автозаполнения (email, телефон, пароль, файл)
- Обязательные поля должны быть как-то выделены, например звездочкой, юзер не должен гадать какие поля нужно заполнять
- Те данные, которые приложение может заполнить автоматически, должны заполняться автоматически () 
- Многострочные поля ввода должны растягиваться при появлении множества строк, но до ограниченной высоты - дальше должен включаться скролл для просмотра контента
- Пробелы в начале и конце введенного текста должны обрезаться
- При выборе даты должны быть проставлены соответствующие границы возможного выбора (нельзя выбрать в прошлом или будущем) - ***не согласен, даты может понадобиться выбрать разные, для просмотра временного промежутка, например***
- Поля по типу цены или зп или чего-то такого- важно стирать ведущие нули, и правильно переводить текст в дробное число (как на цфт там у нас были одно время проблемы с этим)



## Старое
Валидировать поля ввода

обрабатывать ошибки в общем коде, о которых нужно донести юзеру (отсутствие интернета, номер использован и тд), там же устанавливать строку, которую увидит юзер 

Проблемы, которые могут возникнуть с полями ввода:
- некоторые ошибки надо к полям привязывать
- длинная форма, ошибка валидации где-то сверху, но автоматического скролла до нее нет
- если валидация происходит, когда с поля снимается фокус, то в случае одного поля фокус убирать будет некуда. 
- если валидация происходит по нажатию на кнопку, а кнопка доступна только при успешной валидации - то в случае одного поля и запуска валидации при смене фокуса опять проблемы
- валидация происходит сразу же, когда юзер еще не закончил ввод, а все уже пестрит ошибками
- ошибки при валидации двух поля вместе, чтобы одно ссылалось на другое (пароль и повторите пароль)
- изменять одно поле в зависимости от значения в другом поле (конвертер валют)
- счетчик макс количества символов

сообщение об ошибке иногда может содержать информацию, касающуюся конкретного поля (email уже использован)

картинку с таймером: 
- приложение может быть свернуто(на андроиде еще работает, но на iOS - полностью на паузу)
- перепрыгивание секунд (если фикс delay - то накопится ошибка) мобилки - не системы реального времени


## Комменты от Влада

Посмотрю/поресерчу/повспоминаю в ближайшие дни. Отпишу если что-то будет

Anton Shestak  1 day ago
Еще вопрос, какие бывают ошибки, которые надо показывать около полей ввода, но их проверяет сервер? Т.е. их при всем желании нельзя проверить на мобилке. Я придумал только:
- номер телефона / email для регистрации использованы не в первый раз
- неврный код активации

Vladislav Trofimov  11 hours ago
К первому вопросу:
- Прописан атрибут autocomplete для полей,
  поддерживающих это значение.
- Если все поля обязательны для заполнения,
  рядом с их названиями не выводятся
  звездочки — символ *.
- Для авторизованного пользователя в поля
  формы автоматически подставляются все
  известные о посетителе данные.
- Текстовое многострочное поле при вводе
  объемного сообщения изменяет высоту либо в
  правой части появляется скроллбар для
  просмотра всего содержимого.
- При отправке email-а с верхнем регистром он отправляется без приведения к нижнему (спорный кейс, но из опыта скажу что стрелял ни раз и очень больно)
- Сообщения об ошибках понятны обычным
  пользователям и логичны.
- Для полей, предполагающих загрузку файлов, прописан атрибут accept,
  определяющий тип загружаемых документов.

Vladislav Trofimov  9 hours ago
Ко второму вопросу. А точно ли ты хочешь выводить это рядом с полем? Обычно та же уникальность мыла выводится алертом, но некоторые ниже и так и так можно:
- Дата/время (на создании какого-то события. Как например у нас на клоке или споте, где чекается пересечение по времени)
- Любое поле с проверкой уникальности
- Номер телефона на регистрации, который может быть невалидным для какого-то сервиса (на белой сфере такое было)
- Поле ввода старого пароля
- Поле ввода email-а на восстановлении пароля
  (edited)

Vladislav Trofimov  9 hours ago
Написал что в голову пришло. Надеюсь хоть один кейс подойдет :slightly_smiling_face:

Anton Shestak  6 minutes ago
Большое спасибо! @Vladislav Trofimov